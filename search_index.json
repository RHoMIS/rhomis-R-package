[["index.html", "RHoMIS Book 1 About", " RHoMIS Book LÃ©o Gorman 2023-11-04 1 About The Rural Household Multi-Indicator Survey (RHoMIS) is designed to collect data on smallholder farmers. The survey is rich in information, covering a range of topics from dietary diversity to livelihoods. With so much information available, it can often be difficult to extract, This is a book documenting how to use the RHoMIS R-package. We cover 3 main topics: How to process data collected RHoMIS The logic of the calculations, and an overview of key indicators/outputs How to use the R-package to extract useful information "],["data-processing.html", "2 Data Processing 2.1 Installation 2.2 Initial Setup 2.3 Stage 1: Unit Extraction 2.4 Stage 2: Calculating Prices, Preparing Calorie Conversions, and Extracting Secondary Units 2.5 Stage 3: Calculating Indicators", " 2 Data Processing RHoMIS data processing takes place in three stages. Unit Extraction: We search through a survey for all of the units, crops, and livestock which were encountered. The user can examine these units and provide conversion factors so that everything is standardised. For crops and livestock, the user can check all of the entries and standardise (e.g.Â ensure that there are no duplicates with mispelling, such as â€œmaizeâ€ and â€œmazeâ€). Secondary Cleaning: Now that crop and livestock names are standardised (in step 1), we identify all of the calorie conversions and prices we need for a specific survey (e.g.Â based on crops identified in step one we need calorie and prices for â€œmaizeâ€). We use the units converted in step 1 to calculate crop and livestock prices (see Indicators Explained). Indicator Calculation: Finally, with all conversions and units identified, we calculate all of the indicators possible for the survey. A full reproducible example that you can work through, along with a sample dataset can be found here 2.1 Installation Currently RHoMIS is not available on CRAN, but we hope one day it will be. In the meantime, to install the RHoMIS R-package, you will need to install devtools, you can that by entering the following into the R console: install.packages(&quot;devtools&quot;) Then to install the most recent version of the R-package you can enter the following command library(devtools) devtools::install_github(&quot;https://github.com/RHoMIS/rhomis-R-package&quot;, force = TRUE) Then make sure to load the RHoMIS library: library(rhomis) 2.2 Initial Setup You should then ensure you have a folder containing the data you would like to process. If using Rstudio interactively, set your working directory to this folder using the setwd() command. Your directory structure should look something like this: ğŸ“‚ project â”ƒ â”—ğŸ“‚ raw-data â”ƒ â”—ğŸ“œ raw-data.csv 2.3 Stage 1: Unit Extraction 2.3.1 Extracting Units To extract new units from the data you are working with, run the code below. Set the dataFilePath to the path of your RHoMIS raw-data file. extract_units_and_conversions_csv( file_path=&quot;raw-data/raw-data.csv&quot;, id_type = &quot;string&quot;, proj_id = &quot;test_prj&quot;, form_id = &quot;test_frm&quot;) If you now go back to your project directory, you should be able to see that more files have been added: ğŸ“‚ project â”ƒ â”£ğŸ“‚ raw-data â”ƒ â”—ğŸ“œ sample_project.csv â”ƒ â”£ğŸ“‚ conversions_stage_1 â”ƒ â”£ğŸ“œ country.csv â”ƒ â”—ğŸ“œ ... â”ƒ â”—ğŸ“‚ .original_stage_1_conversions â”£ğŸ“œ crop_yield_units.csv â”£ğŸ“œ country.csv â”—ğŸ“œ ... The conversions_stage_1 folder should will include the units which you will verify and change. The .original_stage_1_conversions folder includes an original copy of the units pulled straight from the data. This folder will likely be hidden unless you change the settings on your file browser. 2.3.2 Converting Units Please note, while you do not have to convert units for the next step in the calculations to run, uncoverted units will be ignored and will lead to unnecessary missing values In the project/conversions_stage_1 directory, you will find a series of csv files with conversion factors that need to be filled in. Each file will look like the table below. The survey_value column indicates a value which was found in the survey. The conversion column shows the conversion factor which ought to be used. Where the conversion factor is unknown, the column will display NA. Where the conversion factor is known it will be provided. Known conversion factors are already embedded in the R-package. unit_type id_rhomis_dataset survey_value conversion crop_unit x foo NA crop_unit x bar NA There are a range of conversions to enter and it is important to be aware which units are needed. Each file is described in more detail below: File Description Example Survey Value Example Conversion honey_amount_to_l.csv The conversion factor should be used to convert to kilograms/litres. buckets_12_litre 12 country_to_iso2.csv The conversion factor should be used to convert country names to two-letter ISO country codes. This is important as it is used to find currency conversion factors uganda UG crop_name_to_std.csv The name of crops entered in the survey. Often enumerators may specify â€œotherâ€ crops in a free-text-entry field. Sometimes these crops can be mispelled, or in a language other than English. Here we correct misspellings and translations into standard forms (all lower case) maze maize crop_price_to_lcu_per_kg.csv The price units for crops which were sold. Please note that only one unit will be converted into a string, â€œtotal_income_per_yearâ€ will be converted to â€œtotal_income_per_yearâ€ as this is treated as a special case in the analysis scripts. price_per_50kg_sack 0.02 crop_amount_to_kg.csv The unit of crops which have been collected. This needs to be converted to kilograms cart_250kg 250 eggs_price_to_lcu_per_year.csv The amount of money made per unit time for selling eggs. This needs to be converted into an income per year income for 3 months 4 eggs_amount_to_pieces_per_year.csv The number of eggs collected per year pieces/day 365 fertiliser_amount_to_kg.csv The amount of fertiliser in kg sacks_25kg 25 livestock_name_to_std.csv The names of livestock entered in the survey. As with crop names, enumerators can also enter extra livestock names which are in a different language or mispelt. This conversion is used to standardise livestock names entered in the survey catel cattle milk_price_to_lcu_per_l.csv The amount of money made per unit volume or per unit time. For unit time, the options are â€œdayâ€, â€œweekâ€, â€œmonthâ€, â€œyearâ€. These time units must be entered as strings. For the unit volume, numeric conversions must be entered month month 0.3litre 0.3 milk_amount_to_l.csv The amount of milk collected in litres per year. There are a number of exceptions which must be kept as text strings, and are dealt with in the analysis scripts (e.g.Â â€œper animal per dayâ€ and â€œl/animal/dayâ€ l/day 365 land_area_to_ha.csv The amount of land in hectares acres 0.4 2.4 Stage 2: Calculating Prices, Preparing Calorie Conversions, and Extracting Secondary Units As with unit extraction, ensure you are in the project directory. Then enter the commands below: calculate_prices_csv( file_path=&quot;raw-data/raw-data.csv&quot;, id_type = &quot;string&quot;, proj_id = &quot;my_project_id&quot;, form_id = &quot;my_form_id&quot; ) You will now see that the directory structure again looks quite different: ğŸ“‚ project â”ƒ â”£ğŸ“‚ raw-data â”ƒ â”ƒ â”—ğŸ“œ sample_project.csv â”£ğŸ“‚ conversions_stage_1 â”ƒ â”£ğŸ“œ country.csv â”ƒ â”—ğŸ“œ ... â”ƒ â”—ğŸ“‚ .original_stage_1_conversions â”ƒ â”£ğŸ“œ crop_yield_units.csv â”ƒ â”£ğŸ“œ country.csv â”ƒ â”—ğŸ“œ ... â”ƒ â”£ğŸ“‚ conversions_stage_2 â”ƒ â”£ğŸ“œ crop_calories.csv â”ƒ â”£ğŸ“œ mean_crop_pice_lcu_per_kg â”ƒ â”£ğŸ“œ eggs_calories.csv â”ƒ â”£ğŸ“œ mean_eggs_price_per_kg â”ƒ â”—ğŸ“œ ... â”ƒ â”—ğŸ“‚ .original_stage_2_conversions â”£ğŸ“œ crop_calories.csv â”£ğŸ“œ mean_crop_pice_lcu_per_kg â”£ğŸ“œ eggs_calories.csv â”£ğŸ“œ mean_eggs_price_per_kg â”—ğŸ“œ ... 2.4.1 Converting Calories, Prices, and Other Units 2.4.1.1 Calories and Prices As with the units which were extracted, you will also need to verify prices and calorie values (in the conversions_stage_2 folder). Prices will be in lcu/kg for crops, meat, and eggs (where lcu is local currency units). Prices will be in lcu/l for milk and honey. And prices will be in lcu/animal for whole livestock sales. For calorie values, conversions will be in kcal/kg or kcal/l. 2.4.1.2 Secondary Units Aside from prices and calories, there are other conversion tables to be verified, these units depend on conversions from stage 1. For example livestock_count_tlu requires us to know the standard livestock names (identified in stage 1). The secondary units currently processed in the R-package are: File Description Example Survey Value Example Conversion livestock_weight_kg.csv The conversion factor used to estimate the amount of meat collected from a whole animal. sheep 25 livestock_count_tlu.csv â€œTropical Livestock Unitsâ€ (TLU) for individual animals. cattle 0.7 Please note any folder with a dot before it will not be visible by default in most file explorers 2.5 Stage 3: Calculating Indicators Using the calories and prices you have converted, you will then be able to produce the final indicators. Either run the code below, or run the 03-calculate-final-indicators.R file. calculate_indicators_local( file_path=&quot;raw-data/raw-data.csv&quot;, id_type = &quot;string&quot;, proj_id = &quot;test_prj&quot;, form_id = &quot;test_frm&quot;) You will now see the directory includes some extra folders: You will now see that the directory structure again looks quite different. Extra folders and files have been created. There is a lot of information here, for more explanation, please see an explanation of indicators and outputs ğŸ“‚ project â”ƒ â”£ğŸ“‚ raw-data â”ƒ â”—ğŸ“œ sample_project.csv â”ƒ â”£ğŸ“‚ conversions_stage_1 â”ƒ â”£ğŸ“œ country.csv â”ƒ â”—ğŸ“œ ... â”ƒ â”—ğŸ“‚ .original_stage_1_conversions â”ƒ â”£ğŸ“œ crop_yield_units.csv â”ƒ â”£ğŸ“œ country.csv â”ƒ â”—ğŸ“œ ... â”ƒ â”£ğŸ“‚ conversions_stage_2 â”ƒ â”£ğŸ“œ crop_calories.csv â”ƒ â”£ğŸ“œ mean_crop_pice_lcu_per_kg â”ƒ â”£ğŸ“œ eggs_calories.csv â”ƒ â”£ğŸ“œ mean_eggs_price_per_kg â”ƒ â”—ğŸ“œ ... â”ƒ â”£ğŸ“‚ .original_stage_2_conversions â”ƒ â”£ğŸ“œ crop_calories.csv â”ƒ â”£ğŸ“œ mean_crop_pice_lcu_per_kg â”ƒ â”£ğŸ“œ eggs_calories.csv â”ƒ â”£ğŸ“œ mean_eggs_price_per_kg â”ƒ â”—ğŸ“œ ... â”ƒ â”£ğŸ“‚ crop_data â”ƒ â”£ğŸ“œ crop_consumed_kg_per_year.csv â”ƒ â”£ğŸ“œ crop_harvest_kg_per_year.csv â”ƒ â”—ğŸ“œ ... â”ƒ â”£ğŸ“‚ indicator_data â”ƒ â”—ğŸ“œ indicators.csv â”ƒ â”£ğŸ“‚ livestock_data â”ƒ â”£ğŸ“œ crop_consumed_kg_per_year.csv â”ƒ â”£ğŸ“œ crop_consumed_kg_per_year.csv â”ƒ â”—ğŸ“œ ... â”ƒ â”£ğŸ“‚ off_farm_data â”ƒ â”£ğŸ“œ offfarm_income_name.csv â”ƒ â”£ğŸ“œ offfarm_who_control_revenue.csv â”ƒ â”—ğŸ“œ ... â”ƒ â”—ğŸ“‚ processed_data â”ƒ â”—ğŸ“œ processed_data.csv â”ƒ â”—ğŸ“‚ extra_outputs â”ƒ â”£ğŸ“‚ consumption_calorie_values â”ƒ â”£ğŸ“œ crop_calories_consumed_kcal.csv â”ƒ â”£ğŸ“œ milk_calories_consumed_kcal.csv â”ƒ â”—ğŸ“œ ... â”£ğŸ“‚ consumption_lcu_values â”ƒ â”£ğŸ“œ value_crop_consumed_lcu.csv â”ƒ â”£ğŸ“œ value_eggs_consumed_lcu.csv â”ƒ â”—ğŸ“œ ... â”—ğŸ“‚ gender_control â”ƒ â”£ğŸ“‚ gender_control_amounts_consumed â”ƒ â”£ğŸ“‚ gender_control_income â”ƒ â”—ğŸ“‚ ... "],["outputs-and-data.html", "3 Outputs and Data 3.1 Outputs", " 3 Outputs and Data The core RHoMIS survey contains over 750 variables. These are used to calculate key indicators, such as total_income_lcu_per_year. This guide is designed to explain: How some of the main indicators are calculated How variables are linked How you can explore these calculations and indicators yourself In order to make the most of this guide, you should have a sample RHoMIS dataset, to see how to process a â€œRawâ€ RHoMIS dataset, and produce indicators from this dataset, please see data processing 3.1 Outputs 3.1.1 Indicators Indicators calculated whilst the data was being processed. These cover a range of topics, including incomes, dietary diversity, and household demographics. The indicators calculated depend on the columns present in the original raw-data.csv file. 3.1.2 Crop Data Found in the crop_data directory, in each of the csvs, a column represents the crops listed in the survey, each row represents one household (in the same row order as the original dataset) 3.1.3 Livestock Data Found in the livestock_data directory, in each of the csvs, a column represents the types of livestock listed in the survey, again each row represents a household. 3.1.4 Off-farm Data Found in the off_farm_data directory, in each of the csvs, a column represents an off-farm activity, and each row represents a household. 3.1.5 Consumption Calories Found in the consumption_calorie_values directory, in each of the csvs, a column represents the products listed in the survey, and each row represents a household. 3.1.6 Consumption value Found in the consumption_lcu_values directory, in each of the csvs, a column represents products listed in the survey, and each row represents a household. 3.1.7 Gender Control Found in the gender_control directory, in each of the csvs, a column represents products listed in the survey, and each row represents a household. "],["indicators-explained.html", "4 Indicators Explained 4.1 Main Principle in Calculations 4.2 Indicators", " 4 Indicators Explained The core RHoMIS survey contains over 750 variables. These are used to calculate key indicators, such as total_income_lcu_per_year. This guide is designed to explain: How each indicator is calculated How variables are linked How you can explore these calculations and indicators yourself 4.1 Main Principle in Calculations RHoMIS is designed to collect information on wide range of topics in a short amount of time. Questions in the survey are asked in a way that we can make estimates, whilst not forcing the respondent to provide a level of precision they are not able to. To calculate indicators such as income, productivity, gendered control of resources, we rely on proportions and recall. This is best explained using worked examples (see below) 4.1.1 Worked Example When calculating crop productivity, respondents are asked to give the amount harvested over the past 12 months, they are then asked to give the unit of this amount (e.g.Â â€˜kgâ€™, â€˜tonsâ€™, â€˜gorogoroâ€™ etc.). By multiplying the two it is possible to calculate the number of kilograms harvested over the past 12 months (letâ€™s label this \\(C_H\\)). Respondents are also asked how much income they gain from the sale of this crop and the units of this income (e.g.Â â€˜total income per yearâ€™, â€˜price per kgâ€™, â€˜price per gorogoroâ€™ etc.). This can either be used to calculate total income per year or the income per kg (letâ€™s label these \\(I_{yr}\\) and \\(I_{kg}\\) respectively). Using these variables it is necessary to calculate: number of kg sold (\\(C_s\\)), number of kg consumed (\\(C_c\\)), price per kilo (\\(I_{kg}\\)), income per year (\\(I_{yr}\\)), value controlled by the man (\\(Ctr_M\\)), value controlled by the woman (\\(Ctr_W\\)) and the values of the crops which were consumed (\\(V_{cons}\\)). These calculations mainly rely on proportion responses. The respondent is asked what proportion of the harvest was consumed (\\(prop_{cons}\\)) and what proportion was sold (\\(prop_{sold}\\)), where none=0, little=0.1, under half=0.2, half=0.5, most=0.7, all=0.9. Therefore: \\[\\begin{equation} C_c = prop_{cons}C_H \\tag{4.1} \\end{equation}\\] \\[\\begin{equation} C_s = prop_{sold}C_H \\tag{4.2} \\end{equation}\\] Using the amount sold (\\(C_S\\)) it is possible to work out income per kg and price per kilo (\\(I_{kg}\\)) and income per year (\\(I_{yr}\\)), depending on which sale units were given by the respondent: \\[\\begin{equation} I_{kg} = \\dfrac{P_{yr}}{C_s} \\tag{4.3} \\end{equation}\\] The price per kg is then averaged across the whole project and verified against FAOstat prices, or verified by field staff. Please not this is step 2 of the indicator calculations. Price verification then makes it possible to calculate the value of crop consumed (\\(V_{cons}\\)): \\[\\begin{equation} V_{cons} = P_{kg}{C_c} \\tag{4.4} \\end{equation}\\] Finally, the value controlled by the female (\\(Ctr{W}\\)) and the male (\\(Ctr_M\\)) in the household can be calculated. The respondent is asked what proportion of the crop consumed is controlled by the male (\\(Ctr_{Mcons}\\)) or the woman (\\(Ctr_{Wcons}\\)), where none=0, little=0.1, under half=0.2, half=0.5, most=0.7, all=0.9. The respondent is then asked what proportion of the income from the crop sale is controlled by the male (\\(Ctr_{IM}\\)) or the woman (\\(Ctr_{IW}\\)). Which finally gives: \\[\\begin{equation} Ctr_M= Ctr_{Mcons}V_{cons} + (Ctr_{IM}I_{yr}) \\tag{4.5} \\end{equation}\\] \\[\\begin{equation} Ctr_W= Ctr_{Wcons}V_{cons} + (Ctr_{IW}I_{yr}) \\tag{4.6} \\end{equation}\\] This style of proportion calculation is used throughout the indicator calculations, for further details please see individual explanations of each indicator (below). 4.2 Indicators There are a lot of indicators generated in the RHoMIS dataset. In the final â€œindicatorâ€ table, we have a few key indicators, such as total income, household size, and total land cultivated. For complex indicators, such as total income, we have to calculate a series of intermediate indicators to reach the final income (e.g.Â crop harvested, amount sold, income per kg for that crop). The table below summarises all of the indicators (and intermediate indicators), calculated for core RHoMIS outputs. In this table you will find: Indicator Name: The name of the indicator Output Format: The format for the outputted indicator. If â€œcolumnâ€, then the indicator will be found as a column in the final indicator table. If â€œloopâ€, the indicator will be found across multiple columns in the processed dataset (e.g â€œcrop_name_1â€, â€œcrop_name_2â€, â€œcrop_name_3â€â€¦). Description: A description of the indicators required Individual Columns Required: Which individual columns in the processed data are needed to calculate the indicator (e.g.Â for land_cultivated_ha, we rely on the columns â€œlandcultivatedâ€ and â€œunitlandâ€) Loop Columns Required: Which â€œloopedâ€ columns are needed to calculate the indicator (e.g.Â for â€œcrop_harvest_kg_per_year_1â€, â€œcrop_harvest_kg_per_year_2â€â€¦ we need the columns â€œcrop_yield_1â€ â€œcrop_yield_2â€, â€œcrop_yield_3â€â€¦ and â€œcrop_yield_units_1â€, â€œcrop_yield_units_2â€, â€œcrop_yield_units_3â€â€¦) Conversion Tables Required: Many indicators rely on conversion tables. For example â€œcrop_yield_unitsâ€ come as strings (e.g.Â â€œsacks_50kgâ€, â€œcartsâ€). Conversion tables are used to switch between strings and numeric conversion factors. In this column we specify which conversion factors are required. API Data Required: Some indicators rely on external APIs, for example to obtain currency conversions. This column specifies which API data is needed. Indicators Required: Some indicators rely on other intermediate indicators. For example, total income relies on crop income, livestock income, and off-farm income. Here we specify which indicators an indicator depends on. Function Calculated: Which function in the RHoMIS R-package is used to calculate the indicator Search Term: A unique search term which can be used to identify the point where the indicator is calculated within the function. Dependency Diagram: A link to a diagram which illustrates how the indicator is connected to other indicators/columns. If you would like to see the individual questions, please download a copy of the RHoMIS core survey "],["reporting-issues.html", "5 Reporting Issues 5.1 Reporting Issues", " 5 Reporting Issues 5.1 Reporting Issues Please report any problems or requests you encounter in the issues section of this repo. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
